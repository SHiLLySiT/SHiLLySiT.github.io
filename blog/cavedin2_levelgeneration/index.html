<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Alex Larioza">
    <meta name="description" content="I make cool stuff">
    
    <title>Who is Alex Larioza?!</title>

    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/mdb.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400|Roboto+Slab:400,700|Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
    
    <style>
    body {
        padding-top: 70px;
         
    }
    </style>

    
    
    
</head>

    <body>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <header class="row text-left title">
  <h1 class="title">Caved In 2: Level Generation</h1>
</header>
<section id="category-pane" class="row meta">
  
  <div class="col-md-12">
    <h6 class="text-left meta">
      PUBLISHED ON APR 23, 2013
      
      
      —
      
      
      <a class="meta" href="/categories/devlog">DEVLOG</a>
      
      
    </h6>
  </div>
  
</section>
<section id="content-pane" class="row">
  <div class="col-md-12 text-justify content">
    <p>I love procedural content, especially when it comes to randomly generated levels. Not only are such systems fun to set up, but it provides almost endless experiences without having to tediously design a butt-load of levels (don’t get me wrong though, handcrafted levels made with love and care are also as fun to play). Of course there is a fine line between how much should be randomly generated and how much should be predefined. There’s a certain point where randomness becomes a little too random and detracts from the fun of the game. For example, in the first Caved In I took a rather easy route with level generation:</p>

<ol>
<li>Fill the level with dirt.</li>
<li>Based on weights for each block type choose one. Then find a random square shaped-area in the level. This varies the tiles in the level creating deposits of coal, gold, water, and etc. Do this a few times.</li>
<li>For each tile in the square area, change the dirt tile to the chosen block based on a specified chance (if I remember correctly, blocks had a 30% chance to dirt). This ensures we don’t have square areas of tiles.</li>
<li>Find a random square-shaped area and change all the tiles to floor tiles, which creates (boring) caves. Do this a few times.</li>
</ol>

<p>Resulting levels were “unique” each time but not very interesting because they lacked defining features or fun caves to explore. In Caved In 2 I’ve decided to take a different route. Instead of randomly generating the level, I broke it into four 12×12 tile “rooms”. The rooms are designed by hand in Ogmo by laying out dirt tiles to define caves and placing object spawns (such as loot, power ups, and etc).</p>

<p><img src="/projects/cavedin2/editor_room.png" alt="cavedin2_editor_room" /></p>

<p><em>A bare room designed in Ogmo.</em></p>

<p>The rooms are then compiled into a XML “room database” using a script I wrote in AutoHotKey. When the level is generated, it randomly chooses rooms and stitches them together to form the entire level. The dirt tiles in the rooms are then replaced with other tiles using a similar algorithm found in the original Caved In, although it’s been refined to provide a better spread of block types.</p>

<p><img src="/projects/cavedin2/game_room.png" alt="cavedin2_game_room" /></p>

<p><em>Same room from above in-game…although some gravel caved in above where I dug in.</em></p>

<p>In the end, levels are still randomly generated but provides me with a bit more control to help give the levels a more personal touch. In the coming weeks I’m going to be churning out loads of more rooms as I get closer to release along with more props and decorations. Stay tuned!</p>

  </div>
</section>

<section>
    <footer class="row text-center footer">
  <hr />
  
  <h6 class="text-center copyright">© 2016 Alex Larioza</h6>
  <h6 class="text-center powered">Powered by <a href="https://gohugo.io/">Hugo</a>, <a href="http://mdbootstrap.com/">MDB</a>, &amp; <a href="https://pages.github.com/">Github Pages</a>.</h6>
  
</footer>

</section>

                </div>
            </div>
        </div>

    </body>
</html>
