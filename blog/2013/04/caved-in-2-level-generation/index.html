<!DOCTYPE html>
<html lang="en">

    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="I make cool stuff">
    <meta name="keywords" content="video games, games, cats, meow, cat, android, ios, steam, 
    alex, larioza, material, abstract, design, development, programming,
    developer, studio, unity, unity3d, mobile, fun, bored, madison, 
    wisconsin, indie, solo, dev, arcade, puzzle, app, apple, google, play">
    <title>Who is Alex Larioza?!</title>

    <link rel="stylesheet" href="/css/main.css">
    <link href="https://unpkg.com/material-components-web@10.0.0/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@10.0.0/dist/material-components-web.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" rel="stylesheet">

    
    
    <link rel="icon" href="/favicon32.png" sizes="32x32">
</head>

    
    
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-137044124-1', 'auto');
	
	ga('send', 'pageview');
}
</script>



    <body class="mdc-typography">

        <section class="content content-text">
            <div class="mdc-card content-card">
                <div class="mdc-typography--headline4">Caved In 2: Level Generation</div>
                <div class="mdc-typography--subtitle1">Tuesday, April 23 2013</div>
                <div class="mdc-typography--body1 content-content"><p>I love procedural content, especially when it comes to randomly generated levels. Not only are such systems fun to set up, but it provides almost endless experiences without having to tediously design a butt-load of levels (don’t get me wrong though, handcrafted levels made with love and care are also as fun to play). Of course there is a fine line between how much should be randomly generated and how much should be predefined. There’s a certain point where randomness becomes a little too random and detracts from the fun of the game. For example, in the first Caved In I took a rather easy route with level generation:</p>
<ol>
<li>Fill the level with dirt.</li>
<li>Based on weights for each block type choose one. Then find a random square shaped-area in the level. This varies the tiles in the level creating deposits of coal, gold, water, and etc. Do this a few times.</li>
<li>For each tile in the square area, change the dirt tile to the chosen block based on a specified chance (if I remember correctly, blocks had a 30% chance to dirt). This ensures we don’t have square areas of tiles.</li>
<li>Find a random square-shaped area and change all the tiles to floor tiles, which creates (boring) caves. Do this a few times.</li>
</ol>
<p>Resulting levels were “unique” each time but not very interesting because they lacked defining features or fun caves to explore. In Caved In 2 I’ve decided to take a different route. Instead of randomly generating the level, I broke it into four 12×12 tile “rooms”. The rooms are designed by hand in Ogmo by laying out dirt tiles to define caves and placing object spawns (such as loot, power ups, and etc).</p>
<p><img src="/projects/cavedin2/editor_room.png" alt="cavedin2_editor_room"></p>
<p><em>A bare room designed in Ogmo.</em></p>
<p>The rooms are then compiled into a XML “room database” using a script I wrote in AutoHotKey. When the level is generated, it randomly chooses rooms and stitches them together to form the entire level. The dirt tiles in the rooms are then replaced with other tiles using a similar algorithm found in the original Caved In, although it’s been refined to provide a better spread of block types.</p>
<p><img src="/projects/cavedin2/game_room.png" alt="cavedin2_game_room"></p>
<p><em>Same room from above in-game…although some gravel caved in above where I dug in.</em></p>
<p>In the end, levels are still randomly generated but provides me with a bit more control to help give the levels a more personal touch. In the coming weeks I’m going to be churning out loads of more rooms as I get closer to release along with more props and decorations. Stay tuned!</p>
</div>
            </div>
        </section>
        
        <section>
  <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
  <script>
    window.mdc.autoInit();
  </script>
</section>
    </body>
</html>
